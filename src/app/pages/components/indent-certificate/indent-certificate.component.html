<nb-card>

  <nb-alert *ngIf="showFailureResponseNotification" status="danger" closable (close)="showFailureResponseNotification=false">
    {{responseMessage}}
  </nb-alert>

  <nb-alert *ngIf="showSuccessResponseNotification" status="success" closable (close)="showSuccessResponseNotification=false">
    Saved Successfully
  </nb-alert>

  <nb-alert *ngIf="showFillMandetoryValidation" status="danger" closable (close)="showFillMandetoryValidation=false">
    Fill All the required Fields
  </nb-alert>

  <nb-card-header>Indent Certificate
    <button type="button" style="float:right" class="btn btn-hero-primary btn-demo" (click)="saveIndents()">Save</button>

  </nb-card-header>
  <nb-card-body>
    <form class="form-horizontal" [formGroup]="indentCertificateForm">






      <div class="form-group row">
        <label class="col-sm-2 form-control-label"><strong>Batch</strong><span class="requiredSymbol">*</span> </label>
        <div class="col-sm-4">
          <!-- <p-autoComplete [style]="{'width':'100%'}"   [(ngModel)]="country" [suggestions]="filteredCountriesSingle" (completeMethod)="filterCountrySingle($event)" field="name" [size]="30"
                placeholder="Center" [minLength]="1"></p-autoComplete> -->

          <input type="text" formControlName="batchName" class="form-control" id="inputName" placeholder="Batch">
        </div>
        <div class="col-sm-4">
          <!-- <p-autoComplete [style]="{'width':'100%'}"   [(ngModel)]="country" [suggestions]="filteredCountriesSingle" (completeMethod)="filterCountrySingle($event)" field="name" [size]="30"
                  placeholder="Center" [minLength]="1"></p-autoComplete> -->

          <p style="margin-top:20px"><strong>{{date | date:'dd/MM/yyyy'}}</strong></p>
        </div>
      </div>


      <div style="height:110px;"></div>








      <nb-card>
        <nb-card-header>Students
          <button type="button" class="btn btn-hero-primary btn-demo" style=" float:right;" (click)="addnewStudentForIndent()"><i
              class="fa fa-plus"></i></button>
        </nb-card-header>


        <nb-card-body>


          <div class="row">
            <div class="col-md-12  form-group">




              <div>
                <div class="row">
                  <div class="col-md-3">
                    <label style="display:block"><strong>Student Name</strong><span class="requiredSymbol">*</span></label>

                  </div>
                  <div class="col-md-4">
                    <label style="display:block"><strong>Course</strong><span class="requiredSymbol">*</span></label>

                  </div>
                  <div class="col-md-2">
                    <label style="display:block"><strong>Grade</strong><span class="requiredSymbol">*</span></label>

                  </div>

                  <div class="col-md-2">
                    <label style="display:block"><strong>Certificate Number</strong><span class="requiredSymbol">*</span></label>

                  </div>

                </div>
              </div>

              <div style="margin-top:17px;" formArrayName="studentIndents" *ngFor="let item of studentIndentsArray.controls; let i = index;">



                <div [formGroupName]="i">
                  <div class="row">
                    <div class="col-md-3">


                      <p-autoComplete [style]="{'width':'100%'}" (onSelect)="selectStudent($event,i)" formControlName="student"
                        [suggestions]="names" (completeMethod)="filterName($event)" field="studentName" [size]="30"
                        placeholder="Name" [minLength]="1"></p-autoComplete>
                    </div>

                    <div class="col-md-4">
                      <p-dropdown [style]="{'width':'100%'}" placeholder="select" [options]="this.studentIndentsArray.at(i).get('relatedCourse').value"
                         formControlName="courseSeq" (onChange)="getCertificateInfo(i)"></p-dropdown>
                     
                    </div>
                    <div class="col-md-2">

                      <p-dropdown [style]="{'width':'100%'}" placeholder="select" [options]="grades"
                      formControlName="grade" ></p-dropdown>
<!-- 
                      <input placeholder="Grade" class="form-control" pInputText formControlName="grade"> -->


                    </div>
                    <div class="col-md-2">

                      <input readonly placeholder="Certificate Number" class="form-control" pInputText
                        formControlName="certificateNumber">


                    </div>
                    <div class="col-md-1">

                      <button type="button" class="btn btn-danger" style=" float:right;" (click)="removeSelectedCourse(i)">
                        <i class="fa fa-minus"></i></button>


                    </div>

                  </div>
                </div>
              </div>

              <p style="margin-top: 100px;"><strong>Add Students here</strong></p>



            </div>




          </div>


        </nb-card-body>
      </nb-card>


    </form>
  </nb-card-body>
</nb-card>